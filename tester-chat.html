<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Rewards Chat ‚Äî Quick Qualification</title>
  <meta name="description" content="Fast 2-step check to qualify as a game/app tester." />
  <style>
    :root{
      --bg:#221C36; --glow1:#DB1E14; --glow2:#a5150c; --text:#ffffff; --muted:rgba(255,255,255,.72);
      --card:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.02)); --card-brd:rgba(255,255,255,.10);
      --bot:#2a2542; --you:#3a3458; --chip:#2d274a; --online:#21d07a; --shadow:0 18px 60px rgba(0,0,0,.45);
    }
    *{box-sizing:border-box} html,body{height:100%}
    body{margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial;color:var(--text);
      background:radial-gradient(1100px 520px at 50% -220px, #2b2346 0%, transparent 70%),linear-gradient(135deg,var(--bg),var(--bg));
      overflow:hidden}
    .glow{position:fixed;border-radius:50%;filter:blur(28px);opacity:.22;pointer-events:none;z-index:0;animation:float 7s ease-in-out infinite}
    .g1{width:140px;height:140px;left:40px;top:100px;background:var(--glow1)}
    .g2{width:100px;height:100px;right:60px;top:160px;background:var(--glow2);animation-delay:1.2s;opacity:.18}
    .g3{width:80px;height:80px;left:80px;bottom:120px;background:var(--glow1);animation-delay:2s}
    @keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}
    main{position:relative;z-index:1;height:100%;display:grid;place-items:center;padding:16px}
    .card{width:min(560px,94vw);height:min(720px,92vh);background:var(--card);border:1px solid var(--card-brd);
      border-radius:22px;box-shadow:var(--shadow);display:flex;flex-direction:column;overflow:hidden}
    .top{display:flex;align-items:center;gap:12px;padding:14px 16px;border-bottom:1px solid rgba(255,255,255,.08);backdrop-filter:blur(6px)}
    .logo{width:36px;height:36px;border-radius:10px;overflow:hidden;background:rgba(255,255,255,.06);display:grid;place-items:center;position:relative}
    .logo img{width:100%;height:100%;object-fit:cover}
    .status{position:absolute;bottom:2px;right:2px;width:10px;height:10px;border-radius:50%;background:var(--online);border:2px solid #221C36}
    .title{font-weight:900;letter-spacing:.2px}
    .title small{display:block;color:var(--muted);font-weight:600}
    .chat{flex:1;overflow:auto;padding:16px;display:flex;flex-direction:column;gap:10px;scroll-behavior:smooth}
    .row{display:flex;gap:10px}.row.you{justify-content:flex-end}
    .bubble{max-width:82%;padding:10px 12px;border-radius:14px;line-height:1.45;font-size:14px}
    .you .bubble{background:var(--you)} .bot .bubble{background:var(--bot)}
    .chips{display:flex;gap:8px;flex-wrap:wrap;margin-top:6px}
    .chip{background:var(--chip);color:#fff;border:1px solid rgba(255,255,255,.1);border-radius:999px;padding:10px 14px;font-weight:800;font-size:13px;cursor:pointer;text-decoration:none}
    .typing{display:inline-flex;gap:4px;align-items:center}
    .typing span{width:6px;height:6px;border-radius:50%;background:#fff;opacity:.7;animation:blink 1.2s infinite}
    .typing span:nth-child(2){animation-delay:.2s}.typing span:nth-child(3){animation-delay:.4s}
    @keyframes blink{0%,80%,100%{opacity:.2}40%{opacity:1}}
    .fine{font-size:11px;color:var(--muted);margin-top:6px}
    @media (max-width:420px){.bubble{max-width:90%}.card{height:96vh}}
  </style>
</head>
<body>
  <div class="glow g1"></div><div class="glow g2"></div><div class="glow g3"></div>
  <main>
    <div class="card" role="dialog" aria-label="Qualification Chat">
      <div class="top">
        <div class="logo">
          <img src="https://cdn.testerup.com/themes/default/img/favicon/android-icon-192x192.png" alt="Assistant"/>
          <div class="status" title="online"></div>
        </div>
        <div class="title" id="agentName">Rewards Chat Assistant<small>Online now</small></div>
      </div>
      <div class="chat" id="chat"></div>
    </div>
  </main>
  <script>
    // Fun√ß√£o para adicionar par√¢metros conservados √† URL
    function addSourceToUrl(baseUrl) {
        // Captura os par√¢metros da URL atual
        var currentUrl = window.location.href;
        var urlParams = new URLSearchParams(new URL(currentUrl).search);
        
        // Cria um objeto com os par√¢metros que voc√™ quer transferir
        var desiredParams = {
            'ttclid': '__CLICKID__',
            'utm_campaign': '__CAMPAIGN_NAME__',
            'utm_content': '__CID_NAME__',
            'mc_campaign_id': '__CAMPAIGN_ID__',
            'mc_adset_name': '__AID_NAME__',
            'mc_adset_id': '__AID__',
            'mc_ad_id': '__CID__',
            'mc_pub': '__PLACEMENT__'
        };
        
        // Adiciona os par√¢metros encontrados na URL atual ao URL base
        var finalUrl = baseUrl;
        var separator = finalUrl.includes('?') ? '&' : '?';
        
        Object.keys(desiredParams).forEach(function(key) {
            if (urlParams.has(key)) {
                finalUrl += separator + key + '=' + encodeURIComponent(urlParams.get(key));
                separator = '&';
            } else if (desiredParams[key] && desiredParams[key] !== '') {
                // Se o par√¢metro n√£o estiver na URL atual, usa o valor padr√£o
                finalUrl += separator + key + '=' + encodeURIComponent(desiredParams[key]);
                separator = '&';
            }
        });
        
        return finalUrl;
    }

    // URL base original
    const BASE_AFF = 'https://fb.track-conv.shop/visit/9af8254c-4f74-4d50-b622-8160360399ea';
    
    // Gera a URL final com os par√¢metros de rastreamento
    const AFF = addSourceToUrl(BASE_AFF);
    
    const NAMES = ['Emma','Olivia','Ava','Isabella','Sophia','Mia','Amelia','Harper','Evelyn','Abigail','Ella','Grace','Lily','Chloe','Madison','Avery','Scarlett','Emily','Hannah','Charlotte'];
    const AGENT = NAMES[Math.floor(Math.random()*NAMES.length)];
    const chat = document.getElementById('chat');
    const agentTitle = document.getElementById('agentName');
    agentTitle.innerHTML = `${AGENT} <small>Online now</small>`;

    function addRow(side, html){
      const row = document.createElement('div');
      row.className = `row ${side}`;
      const b = document.createElement('div'); b.className = 'bubble'; b.innerHTML = html; row.appendChild(b);
      chat.appendChild(row); chat.scrollTop = chat.scrollHeight;
    }
    function addTyping(){
      const row = document.createElement('div'); row.className = 'row bot'; row.id='typing';
      row.innerHTML = '<div class="bubble"><span class="typing"><span></span><span></span><span></span></span></div>';
      chat.appendChild(row); chat.scrollTop = chat.scrollHeight;
    }
    function removeTyping(){ const t=document.getElementById('typing'); if(t) t.remove(); }

    let answers = {};
    function start(){
      addTyping();
      setTimeout(()=>{
        removeTyping();
        addRow('bot', `Hi üëã I'm <b>${AGENT}</b> from Testerup. It looks like you're interested in getting paid up to <b>$2,000/week</b> to test games! Let's quickly see if you qualify.`);
        askAge();
      }, 900);
    }
    function askAge(){
      addTyping();
      setTimeout(()=>{
        removeTyping();
        const ageHtml = `What's your age range?
          <div class="chips">
            ${['18‚Äì24','25‚Äì34','35‚Äì44','45+'].map(a=>`<button class="chip" data-age="${a}">${a}</button>`).join('')}
          </div>
          <div class="fine">You'll get tasks suited to your group.</div>`;
        addRow('bot', ageHtml);
        document.querySelectorAll('[data-age]').forEach(btn=> btn.addEventListener('click', ()=> onAge(btn.dataset.age)));
      }, 700);
    }
    function onAge(val){
      answers.age = val; addRow('you', val); askUS();
    }
    function askUS(){
      addTyping();
      setTimeout(()=>{
        removeTyping();
        const usHtml = `Do you live in the United States?
          <div class="chips">
            <button class="chip" data-us="yes">Yes</button>
            <button class="chip" data-us="no">No</button>
          </div>`;
        addRow('bot', usHtml);
        document.querySelectorAll('[data-us]').forEach(btn=> btn.addEventListener('click', ()=> onUS(btn.dataset.us)));
      }, 700);
    }
    function onUS(val){
      answers.us = val; addRow('you', val === 'yes' ? 'Yes' : 'No'); finish();
    }
    function finish(){
      addTyping();
      setTimeout(()=>{
        removeTyping();
        const role = 'game tester';
        if(answers.us === 'yes'){
          const qualify = `Great news! üéâ You qualify to become a <b>${role}</b>. Tap below and download the app to get started ‚Äî each game only takes <b>2 minutes</b>!`;
          const cta = `<div class="chips"><a class="chip" href="${AFF}" rel="nofollow noopener" onclick="trackClick()">Start here</a></div>`;
          addRow('bot', qualify + '<br/>' + cta);
        } else {
          const msg = `Thanks for checking! At the moment, this program is focused on the United States. We're expanding soon ‚Äî check back later for availability in your region.`;
          addRow('bot', msg);
        }
      }, 900);
    }
    
    // Fun√ß√£o para tracking de clique (similar ao primeiro site)
    function trackClick() {
        // Tracking TikTok (se dispon√≠vel)
        if (typeof window !== 'undefined' && window.ttq) {
            window.ttq.track('CompleteRegistration');
        }
    }
    
    start();
  </script>
</body>
</html>
